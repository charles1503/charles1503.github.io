<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Consul和Consul Template使用笔记 | Charles's Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Consul和Consul Template使用笔记</h1><a id="logo" href="/.">Charles's Blog</a><p class="description">任何事都没有表面看起来那么简单。</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Consul和Consul Template使用笔记</h1><div class="post-meta">Nov 12, 2018<span> | </span><span class="category"><a href="/categories/微服务/">微服务</a></span></div><a class="disqus-comment-count" href="/2018/11/12/Consul和Consul Template的使用/#vcomment"><span class="valine-comment-count" data-xid="/2018/11/12/Consul和Consul Template的使用/"></span><span> 条评论</span></a><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Consul-作为服务发现-注册中心"><span class="toc-number">1.</span> <span class="toc-text">Consul 作为服务发现/注册中心</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Consul-作为配置中心-KV"><span class="toc-number">2.</span> <span class="toc-text">Consul 作为配置中心(KV)</span></a></li></ol></div></div><div class="post-content"><h3 id="Consul-作为服务发现-注册中心"><a href="#Consul-作为服务发现-注册中心" class="headerlink" title="Consul 作为服务发现/注册中心"></a>Consul 作为服务发现/注册中心</h3><ul>
<li><p>服务注册</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">待补充</span><br></pre></td></tr></table></figure>
</li>
<li><p>服务发现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">待补充</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="Consul-作为配置中心-KV"><a href="#Consul-作为配置中心-KV" class="headerlink" title="Consul 作为配置中心(KV)"></a>Consul 作为配置中心(KV)</h3><ul>
<li><p>Consul 命令行 KV 存储</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">./consul kv put foo foo_value </span><br><span class="line">./consul kv get foo</span><br><span class="line"></span><br><span class="line">./consul kv put foo/user1/name charles </span><br><span class="line">./consul kv get foo/user1/name</span><br></pre></td></tr></table></figure>
</li>
<li><p>Consul Rest API KV 存储</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">curl -X PUT -d &quot;foo_value&quot; http://localhost:8500/v1/kv/foo -v</span><br><span class="line">*   Trying ::1...</span><br><span class="line">* TCP_NODELAY set</span><br><span class="line">* Connection failed</span><br><span class="line">* connect to ::1 port 8500 failed: Connection refused</span><br><span class="line">*   Trying 127.0.0.1...</span><br><span class="line">* TCP_NODELAY set</span><br><span class="line">* Connected to localhost (127.0.0.1) port 8500 (#0)</span><br><span class="line">&gt; PUT /v1/kv/foo HTTP/1.1</span><br><span class="line">&gt; Host: localhost:8500</span><br><span class="line">&gt; User-Agent: curl/7.54.0</span><br><span class="line">&gt; Accept: */*</span><br><span class="line">&gt; Content-Length: 5</span><br><span class="line">&gt; Content-Type: application/x-www-form-urlencoded</span><br><span class="line">&gt;</span><br><span class="line">* upload completely sent off: 5 out of 5 bytes</span><br><span class="line">&lt; HTTP/1.1 200 OK</span><br><span class="line">&lt; Content-Type: application/json</span><br><span class="line">&lt; Vary: Accept-Encoding</span><br><span class="line">&lt; Date: Wed, 27 Feb 2019 14:59:21 GMT</span><br><span class="line">&lt; Content-Length: 5</span><br><span class="line">&lt;</span><br><span class="line">true</span><br><span class="line">curl http://localhost:8500/v1/kv/foo</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;LockIndex&quot;: 0,</span><br><span class="line">        &quot;Key&quot;: &quot;foo&quot;,</span><br><span class="line">        &quot;Flags&quot;: 0,</span><br><span class="line">        &quot;Value&quot;: &quot;Y2hhcmxlczMz&quot;,</span><br><span class="line">        &quot;CreateIndex&quot;: 12,</span><br><span class="line">        &quot;ModifyIndex&quot;: 14</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">curl -X PUT -d &quot;charles&quot; http://localhost:8500/v1/kv/foo/user1/name </span><br><span class="line">true</span><br><span class="line">curl http://localhost:8500/v1/kv/foo/user1/name</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;LockIndex&quot;: 0,</span><br><span class="line">        &quot;Key&quot;: &quot;foo/user1/name&quot;,</span><br><span class="line">        &quot;Flags&quot;: 0,</span><br><span class="line">        &quot;Value&quot;: &quot;Y2hhcmxlcw==&quot;,</span><br><span class="line">        &quot;CreateIndex&quot;: 148,</span><br><span class="line">        &quot;ModifyIndex&quot;: 148</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>Consul KV 存储RestAPI 获取 value (Base64编码)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">curl http://localhost:8500/v1/kv/foo -v</span><br><span class="line">*   Trying ::1...</span><br><span class="line">* TCP_NODELAY set</span><br><span class="line">* Connection failed</span><br><span class="line">* connect to ::1 port 8500 failed: Connection refused</span><br><span class="line">*   Trying 127.0.0.1...</span><br><span class="line">* TCP_NODELAY set</span><br><span class="line">* Connected to localhost (127.0.0.1) port 8500 (#0)</span><br><span class="line">&gt; GET /v1/kv/foo HTTP/1.1</span><br><span class="line">&gt; Host: localhost:8500</span><br><span class="line">&gt; User-Agent: curl/7.54.0</span><br><span class="line">&gt; Accept: */*</span><br><span class="line">&gt;</span><br><span class="line">&lt; HTTP/1.1 200 OK</span><br><span class="line">&lt; Content-Type: application/json</span><br><span class="line">&lt; Vary: Accept-Encoding</span><br><span class="line">&lt; X-Consul-Index: 95</span><br><span class="line">&lt; X-Consul-Knownleader: true</span><br><span class="line">&lt; X-Consul-Lastcontact: 0</span><br><span class="line">&lt; Date: Wed, 27 Feb 2019 15:01:58 GMT</span><br><span class="line">&lt; Content-Length: 168</span><br><span class="line">&lt;</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;LockIndex&quot;: 0,</span><br><span class="line">        &quot;Key&quot;: &quot;foo&quot;,</span><br><span class="line">        &quot;Flags&quot;: 0,</span><br><span class="line">        &quot;Value&quot;: &quot;Zm9vX3ZhbHVl&quot;,</span><br><span class="line">        &quot;CreateIndex&quot;: 17,</span><br><span class="line">        &quot;ModifyIndex&quot;: 95</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>Consul Template 获取 value</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">vi kv.tpl</span><br><span class="line">&#123;&#123; key &quot;foo&quot; &#125;&#125;</span><br><span class="line"></span><br><span class="line">./consul-template -template &quot;./kv.tpl:./kv.result&quot; -once</span><br><span class="line">cat kv.result</span><br><span class="line">foo_value</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">动态生成文件:</span><br><span class="line">$ consul-template \</span><br><span class="line">  -consul 127.0.0.1:8500 \</span><br><span class="line">  -template &quot;/tmp/template.ctmpl:/var/www/nginx.conf:service nginx restart&quot; \</span><br><span class="line">  //输出到www/nginx.conf上，如果nginx.conf发生变化，nginx服务重启</span><br><span class="line">  -retry 30s \ //如果consul服务器不可用，每30s轮询一次服务器</span><br><span class="line">  -once</span><br><span class="line"></span><br><span class="line">$ consul-template \</span><br><span class="line">     -consul-addr=consul:8500 \</span><br><span class="line">     -template &quot;/opt/verynginx/verynginx/consul-templates/in_http_block.ctmpl:/opt/verynginx/verynginx/nginx_conf/in_http_block.conf:sv hup nginx&quot; \</span><br><span class="line">     -template &quot;/opt/verynginx/verynginx/consul-templates/in_server_block.ctmpl:/opt/verynginx/verynginx/nginx_conf/in_server_block.conf:sv hup nginx&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">使用ssl链接</span><br><span class="line">$ consul-template \</span><br><span class="line">  -consul 127.0.0.1:8543 \</span><br><span class="line">  -ssl \</span><br><span class="line">  -ssl-cert /path/to/client/cert.pem \</span><br><span class="line">  -ssl-ca-cert /path/to/ca/cert.pem \</span><br><span class="line">  -template &quot;/tmp/template.ctmpl:/tmp/result&quot; \</span><br><span class="line">  -dry \  //不知是做啥的</span><br><span class="line">  -once</span><br></pre></td></tr></table></figure>
</li>
<li><p>Java 获取所有 KV</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import com.ecwid.consul.v1.ConsulClient;</span><br><span class="line">import com.ecwid.consul.v1.kv.model.GetValue;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">ConsulClient consulClient = new ConsulClient(&quot;127.0.0.1&quot;, 8500);</span><br><span class="line">List&lt;GetValue&gt; kvList = consulClient.getKVValues(&quot;&quot;).getValue();</span><br><span class="line">for (GetValue getValue : kvList) &#123;</span><br><span class="line">    System.out.println(String.format(&quot;%s = %s&quot;, getValue.getKey(), getValue.getDecodedValue()));</span><br><span class="line">&#125;</span><br><span class="line">结果:</span><br><span class="line">foo=charles33</span><br><span class="line">foo/user1/name=charles</span><br><span class="line">foo1=charles33</span><br><span class="line">foo2=charles33</span><br></pre></td></tr></table></figure>
</li>
<li><p>consul-template 获取所有 KV(深度受限于ls后的参数,只扫描指定目录,子目录不会获取)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">vi kvs.tpl</span><br><span class="line">&#123; &#123;&#123;range ls &quot;/&quot;&#125;&#125;</span><br><span class="line">* &#123;&#123; .Key &#125;&#125; = &#123;&#123; .Value &#125;&#125; &#123;&#123; end &#125;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">./consul-template -template &quot;./kvs.tpl:./kvs.result&quot; -once</span><br><span class="line"></span><br><span class="line">cat kvs.result</span><br><span class="line">&#123;</span><br><span class="line">* foo = charles33</span><br><span class="line">* foo1 = charles33</span><br><span class="line">* foo2 = charles33</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vi kvs1.tpl</span><br><span class="line">&#123; &#123;&#123;range ls &quot;/foo/user1/&quot;&#125;&#125;</span><br><span class="line">* &#123;&#123; .Key &#125;&#125; = &#123;&#123; .Value &#125;&#125; &#123;&#123; end &#125;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">./consul-template -template &quot;./kvs1.tpl:./kvs1.result&quot; -once</span><br><span class="line"></span><br><span class="line">cat kvs1.result</span><br><span class="line">&#123;</span><br><span class="line">* name = charles</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>RestAPI 获取所有 KV</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">$ curl http://127.0.0.1:8500/v1/kv/?recurse -v</span><br><span class="line">*   Trying 127.0.0.1...</span><br><span class="line">* TCP_NODELAY set</span><br><span class="line">* Connected to 127.0.0.1 (127.0.0.1) port 8500 (#0)</span><br><span class="line">&gt; GET /v1/kv/?recurse HTTP/1.1</span><br><span class="line">&gt; Host: 127.0.0.1:8500</span><br><span class="line">&gt; User-Agent: curl/7.54.0</span><br><span class="line">&gt; Accept: */*</span><br><span class="line">&gt;</span><br><span class="line">&lt; HTTP/1.1 200 OK</span><br><span class="line">&lt; Content-Type: application/json</span><br><span class="line">&lt; Vary: Accept-Encoding</span><br><span class="line">&lt; X-Consul-Index: 60</span><br><span class="line">&lt; X-Consul-Knownleader: true</span><br><span class="line">&lt; X-Consul-Lastcontact: 0</span><br><span class="line">&lt; Date: Thu, 28 Feb 2019 01:41:31 GMT</span><br><span class="line">&lt; Content-Length: 500</span><br><span class="line">&lt;</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;LockIndex&quot;: 0,</span><br><span class="line">        &quot;Key&quot;: &quot;foo&quot;,</span><br><span class="line">        &quot;Flags&quot;: 0,</span><br><span class="line">        &quot;Value&quot;: &quot;Y2hhcmxlczMz&quot;,</span><br><span class="line">        &quot;CreateIndex&quot;: 12,</span><br><span class="line">        &quot;ModifyIndex&quot;: 14</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;LockIndex&quot;: 0,</span><br><span class="line">        &quot;Key&quot;: &quot;foo/user1/name&quot;,</span><br><span class="line">        &quot;Flags&quot;: 0,</span><br><span class="line">        &quot;Value&quot;: &quot;Y2hhcmxlcw==&quot;,</span><br><span class="line">        &quot;CreateIndex&quot;: 148,</span><br><span class="line">        &quot;ModifyIndex&quot;: 148</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;LockIndex&quot;: 0,</span><br><span class="line">        &quot;Key&quot;: &quot;foo1&quot;,</span><br><span class="line">        &quot;Flags&quot;: 0,</span><br><span class="line">        &quot;Value&quot;: &quot;Y2hhcmxlczMz&quot;,</span><br><span class="line">        &quot;CreateIndex&quot;: 59,</span><br><span class="line">        &quot;ModifyIndex&quot;: 59</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;LockIndex&quot;: 0,</span><br><span class="line">        &quot;Key&quot;: &quot;foo2&quot;,</span><br><span class="line">        &quot;Flags&quot;: 0,</span><br><span class="line">        &quot;Value&quot;: &quot;Y2hhcmxlczMz&quot;,</span><br><span class="line">        &quot;CreateIndex&quot;: 60,</span><br><span class="line">        &quot;ModifyIndex&quot;: 60</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>更多资料详见 <a href="https://github.com/hashicorp/consul-template" target="_blank" rel="noopener">https://github.com/hashicorp/consul-template</a></p>
</li>
</ul>
</div><div class="tags"><a href="/tags/Java/">Java</a><a href="/tags/Nginx/">Nginx</a></div><div class="post-nav"><a class="pre" href="/2019/01/12/OpenResty之共享内存/">OpenResty ngx.shared.DICT</a><a class="next" href="/2018/09/12/MySQL docker主从搭建/">使用docker搭建主从MySQL环境</a></div><div id="vcomment"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var notify = 'false' == true ? true : false;
var verify = 'false' == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'P3HSH58by4CLzdd1RAww5y5y-gzGzoHsz',
  appKey:'wAzBXy1KkhP1p1HnQb6OS86v',
  placeholder:'',
  avatar:'mm',
  guest_info:guest_info,
  pageSize:'10'
})</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="http://charles1503.gitee.io"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/">DevOps</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/banner/">banner</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/中间件/">中间件</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/微服务/">微服务</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/Nginx/" style="font-size: 15px;">Nginx</a> <a href="/tags/Lua/" style="font-size: 15px;">Lua</a> <a href="/tags/MySQL/" style="font-size: 15px;">MySQL</a> <a href="/tags/Dokcer/" style="font-size: 15px;">Dokcer</a> <a href="/tags/找乐子/" style="font-size: 15px;">找乐子</a> <a href="/tags/Kafka/" style="font-size: 15px;">Kafka</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/03/12/MaxWell与Canal/">MaxWell与Canal</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/12/OpenResty之共享内存/">OpenResty ngx.shared.DICT</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/12/Consul和Consul Template的使用/">Consul和Consul Template使用笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/12/MySQL docker主从搭建/">使用docker搭建主从MySQL环境</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/12/banner-keyborad/">键盘Banner</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://gitee.com/charles1503" title="码云" target="_blank">码云</a><ul></ul><a href="https://github.com/charles1503" title="GitHub" target="_blank">GitHub</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">Charles's Blog.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>